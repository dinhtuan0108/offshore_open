/*
 * jQuery Nivo Slider v2.7.1
 * http://nivo.dev7studios.com
 *
 * Copyright 2011, Gilbert Pellegrom
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * March 2010
 */
(function(e){var t=function(t,n){var r=e.extend({},e.fn.nivoSlider.defaults,n);var i={currentSlide:0,currentImage:"",totalSlides:0,running:false,paused:false,stop:false};var s=e(t);s.data("nivo:vars",i);s.css("position","relative");s.addClass("nivoSlider");var o=s.children();o.each(function(){var t=e(this);var n="";if(!t.is("img")){if(t.is("a")){t.addClass("nivo-imageLink");n=t}t=t.find("img:first")}var r=t.width();if(r==0)r=t.attr("width");var o=t.height();if(o==0)o=t.attr("height");if(r>s.width()){s.width(r)}if(o>s.height()){s.height(o)}if(n!=""){n.css("display","none")}t.css("display","none");i.totalSlides++});if(r.randomStart){r.startSlide=Math.floor(Math.random()*i.totalSlides)}if(r.startSlide>0){if(r.startSlide>=i.totalSlides)r.startSlide=i.totalSlides-1;i.currentSlide=r.startSlide}if(e(o[i.currentSlide]).is("img")){i.currentImage=e(o[i.currentSlide])}else{i.currentImage=e(o[i.currentSlide]).find("img:first")}if(e(o[i.currentSlide]).is("a")){e(o[i.currentSlide]).css("display","block")}s.css("background",'url("'+i.currentImage.attr("src")+'") no-repeat');s.append(e('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:r.captionOpacity}));e(".nivo-caption",s).css("opacity",0);var u=function(t){var n=e(".nivo-caption",s);if(i.currentImage.attr("title")!=""&&i.currentImage.attr("title")!=undefined){var r=i.currentImage.attr("title");if(r.substr(0,1)=="#")r=e(r).html();if(n.css("opacity")!=0){n.find("p").stop().fadeTo(t.animSpeed,0,function(){e(this).html(r);e(this).stop().fadeTo(t.animSpeed,1)})}else{n.find("p").html(r)}n.stop().fadeTo(t.animSpeed,t.captionOpacity)}else{n.stop().fadeTo(t.animSpeed,0)}};u(r);var a=0;if(!r.manualAdvance&&o.length>1){a=setInterval(function(){d(s,o,r,false)},r.pauseTime)}if(r.directionNav){s.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+r.prevText+'</a><a class="nivo-nextNav">'+r.nextText+"</a></div>");if(r.directionNavHide){e(".nivo-directionNav",s).hide();s.hover(function(){e(".nivo-directionNav",s).show()},function(){e(".nivo-directionNav",s).hide()})}e("a.nivo-prevNav",s).live("click",function(){if(i.running)return false;clearInterval(a);a="";i.currentSlide-=2;d(s,o,r,"prev")});e("a.nivo-nextNav",s).live("click",function(){if(i.running)return false;clearInterval(a);a="";d(s,o,r,"next")})}if(r.controlNav){var f=e('<div class="nivo-controlNav"></div>');s.append(f);for(var l=0;l<o.length;l++){if(r.controlNavThumbs){var c=o.eq(l);if(!c.is("img")){c=c.find("img:first")}if(r.controlNavThumbsFromRel){f.append('<a class="nivo-control" rel="'+l+'"><img src="'+c.attr("rel")+'" alt="" /></a>')}else{f.append('<a class="nivo-control" rel="'+l+'"><img src="'+c.attr("src").replace(r.controlNavThumbsSearch,r.controlNavThumbsReplace)+'" alt="" /></a>')}}else{f.append('<a class="nivo-control" rel="'+l+'">'+(l+1)+"</a>")}}e(".nivo-controlNav a:eq("+i.currentSlide+")",s).addClass("active");e(".nivo-controlNav a",s).live("click",function(){if(i.running)return false;if(e(this).hasClass("active"))return false;clearInterval(a);a="";s.css("background","transparent");i.currentSlide=e(this).attr("rel")-1;d(s,o,r,"control")})}if(r.keyboardNav){e(window).keypress(function(e){if(e.keyCode=="37"){if(i.running)return false;clearInterval(a);a="";i.currentSlide-=2;d(s,o,r,"prev")}if(e.keyCode=="39"){if(i.running)return false;clearInterval(a);a="";d(s,o,r,"next")}})}if(r.pauseOnHover){s.hover(function(){i.paused=true;clearInterval(a);a=""},function(){i.paused=false;if(a==""&&!r.manualAdvance){a=setInterval(function(){d(s,o,r,false)},r.pauseTime)}})}s.bind("nivo:animFinished",function(){i.running=false;e(o).each(function(){if(e(this).is("a")){e(this).css("display","none")}});if(e(o[i.currentSlide]).is("a")){e(o[i.currentSlide]).css("display","block")}if(a==""&&!i.paused&&!r.manualAdvance){a=setInterval(function(){d(s,o,r,false)},r.pauseTime)}r.afterChange.call(this)});var h=function(t,n,r){for(var i=0;i<n.slices;i++){var s=Math.round(t.width()/n.slices);if(i==n.slices-1){t.append(e('<div class="nivo-slice"></div>').css({left:s*i+"px",width:t.width()-s*i+"px",height:"0px",opacity:"0",background:'url("'+r.currentImage.attr("src")+'") no-repeat -'+(s+i*s-s)+"px 0%"}))}else{t.append(e('<div class="nivo-slice"></div>').css({left:s*i+"px",width:s+"px",height:"0px",opacity:"0",background:'url("'+r.currentImage.attr("src")+'") no-repeat -'+(s+i*s-s)+"px 0%"}))}}};var p=function(t,n,r){var i=Math.round(t.width()/n.boxCols);var s=Math.round(t.height()/n.boxRows);for(var o=0;o<n.boxRows;o++){for(var u=0;u<n.boxCols;u++){if(u==n.boxCols-1){t.append(e('<div class="nivo-box"></div>').css({opacity:0,left:i*u+"px",top:s*o+"px",width:t.width()-i*u+"px",height:s+"px",background:'url("'+r.currentImage.attr("src")+'") no-repeat -'+(i+u*i-i)+"px -"+(s+o*s-s)+"px"}))}else{t.append(e('<div class="nivo-box"></div>').css({opacity:0,left:i*u+"px",top:s*o+"px",width:i+"px",height:s+"px",background:'url("'+r.currentImage.attr("src")+'") no-repeat -'+(i+u*i-i)+"px -"+(s+o*s-s)+"px"}))}}}};var d=function(t,n,r,i){var s=t.data("nivo:vars");if(s&&s.currentSlide==s.totalSlides-1){r.lastSlide.call(this)}if((!s||s.stop)&&!i)return false;r.beforeChange.call(this);t.css("background","transparent");s.currentSlide++;if(s.currentSlide==s.totalSlides){s.currentSlide=0;r.slideshowEnd.call(this)}if(s.currentSlide<0)s.currentSlide=s.totalSlides-1;if(e(n[s.currentSlide]).is("img")){s.currentImage=e(n[s.currentSlide])}else{s.currentImage=e(n[s.currentSlide]).find("img:first")}if(r.controlNav){e(".nivo-controlNav a",t).removeClass("active");e(".nivo-controlNav a:eq("+s.currentSlide+")",t).addClass("active")}u(r);e(".nivo-slice",t).remove();e(".nivo-box",t).remove();var o=r.effect;if(r.effect=="random"){var a=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse");o=a[Math.floor(Math.random()*(a.length+1))];if(o==undefined)o="fade"}if(r.effect.indexOf(",")!=-1){var a=r.effect.split(",");o=a[Math.floor(Math.random()*a.length)];if(o==undefined)o="fade"}if(s.currentImage.attr("data-transition")){o=s.currentImage.attr("data-transition")}s.running=true;if(o=="sliceDown"||o=="sliceDownRight"||o=="sliceDownLeft"){h(t,r,s);var f=0;var l=0;var c=e(".nivo-slice",t);if(o=="sliceDownLeft")c=e(".nivo-slice",t)._reverse();c.each(function(){var n=e(this);n.css({top:"0px"});if(l==r.slices-1){setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+f)}else{setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+f)}f+=50;l++})}else if(o=="sliceUp"||o=="sliceUpRight"||o=="sliceUpLeft"){h(t,r,s);var f=0;var l=0;var c=e(".nivo-slice",t);if(o=="sliceUpLeft")c=e(".nivo-slice",t)._reverse();c.each(function(){var n=e(this);n.css({bottom:"0px"});if(l==r.slices-1){setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+f)}else{setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+f)}f+=50;l++})}else if(o=="sliceUpDown"||o=="sliceUpDownRight"||o=="sliceUpDownLeft"){h(t,r,s);var f=0;var l=0;var d=0;var c=e(".nivo-slice",t);if(o=="sliceUpDownLeft")c=e(".nivo-slice",t)._reverse();c.each(function(){var n=e(this);if(l==0){n.css("top","0px");l++}else{n.css("bottom","0px");l=0}if(d==r.slices-1){setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+f)}else{setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+f)}f+=50;d++})}else if(o=="fold"){h(t,r,s);var f=0;var l=0;e(".nivo-slice",t).each(function(){var n=e(this);var i=n.width();n.css({top:"0px",height:"100%",width:"0px"});if(l==r.slices-1){setTimeout(function(){n.animate({width:i,opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+f)}else{setTimeout(function(){n.animate({width:i,opacity:"1.0"},r.animSpeed)},100+f)}f+=50;l++})}else if(o=="fade"){h(t,r,s);var m=e(".nivo-slice:first",t);m.css({height:"100%",width:t.width()+"px"});m.animate({opacity:"1.0"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")})}else if(o=="slideInRight"){h(t,r,s);var m=e(".nivo-slice:first",t);m.css({height:"100%",width:"0px",opacity:"1"});m.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")})}else if(o=="slideInLeft"){h(t,r,s);var m=e(".nivo-slice:first",t);m.css({height:"100%",width:"0px",opacity:"1",left:"",right:"0px"});m.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){m.css({left:"0px",right:""});t.trigger("nivo:animFinished")})}else if(o=="boxRandom"){p(t,r,s);var g=r.boxCols*r.boxRows;var l=0;var f=0;var y=v(e(".nivo-box",t));y.each(function(){var n=e(this);if(l==g-1){setTimeout(function(){n.animate({opacity:"1"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+f)}else{setTimeout(function(){n.animate({opacity:"1"},r.animSpeed)},100+f)}f+=20;l++})}else if(o=="boxRain"||o=="boxRainReverse"||o=="boxRainGrow"||o=="boxRainGrowReverse"){p(t,r,s);var g=r.boxCols*r.boxRows;var l=0;var f=0;var b=0;var w=0;var E=new Array;E[b]=new Array;var y=e(".nivo-box",t);if(o=="boxRainReverse"||o=="boxRainGrowReverse"){y=e(".nivo-box",t)._reverse()}y.each(function(){E[b][w]=e(this);w++;if(w==r.boxCols){b++;w=0;E[b]=new Array}});for(var S=0;S<r.boxCols*2;S++){var x=S;for(var T=0;T<r.boxRows;T++){if(x>=0&&x<r.boxCols){(function(n,i,s,u,a){var f=e(E[n][i]);var l=f.width();var c=f.height();if(o=="boxRainGrow"||o=="boxRainGrowReverse"){f.width(0).height(0)}if(u==a-1){setTimeout(function(){f.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3,"",function(){t.trigger("nivo:animFinished")})},100+s)}else{setTimeout(function(){f.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3)},100+s)}})(T,x,f,l,g);l++}x--}f+=100}}};var v=function(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e};var m=function(e){if(this.console&&typeof console.log!="undefined")console.log(e)};this.stop=function(){if(!e(t).data("nivo:vars").stop){e(t).data("nivo:vars").stop=true;m("Stop Slider")}};this.start=function(){if(e(t).data("nivo:vars").stop){e(t).data("nivo:vars").stop=false;m("Start Slider")}};r.afterLoad.call(this);return this};e.fn.nivoSlider=function(n){return this.each(function(r,i){var s=e(this);if(s.data("nivoslider"))return s.data("nivoslider");var o=new t(this,n);s.data("nivoslider",o)})};e.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3e3,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:.8,prevText:"Prev",nextText:"Next",randomStart:false,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};e.fn._reverse=[].reverse})(jQuery)